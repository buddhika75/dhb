<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="./tmpl.xhtml">

            <ui:define name="content">



                <h:form  enctype="multipart/form-data">

                    <p:growl>
                        <p:autoUpdate />
                    </p:growl>

                    <div class="w3-row"  style="font-family: 'Passion One', cursive; font-size: 2em; text-align: center;" >
                        <div class="w3-col m4 l3 w3-padding" >
                            <h:commandLink value="Next"  disabled="#{imageController.image eq null}" 
                                           class="w3-button w3-deep-orange w3-round-large"  action="#{institutionController.updateAndToSignature()}"
                                           style="width: 100%; padding: 2%; ">
                            </h:commandLink>
                        </div>

                        <div class="w3-col m4 l3 w3-padding" >
                            <h:commandLink value="Clear Photo" class="w3-button w3-deep-orange w3-round-large" 
                                           action="#{institutionController.clearPhoto()}"
                                           style="width: 100%; padding: 2%; ">
                            </h:commandLink>
                        </div>

                        <div class="w3-col m4 l3 w3-padding" >
                            <h:commandLink value="Back" class="w3-button w3-deep-orange w3-round-large" action="index"
                                           style="width: 100%; padding: 2%; ">
                            </h:commandLink>
                        </div>

                    </div>
                    <div class="w3-row" style="text-align: center;"  >

                        <p:panelGrid columns="2" style="width: 95%; margin: 1% auto;">
                            <h:outputLabel value="Name:" for="name" styleClass="reg" />
                            <h:inputText id="name" value="#{institutionController.selectedParcipant.name}" 
                                         styleClass="reg" />

                        </p:panelGrid>


                    </div>

                    <div class="w3-row" style="text-align: center; margin: auto;"  >
                        <p:autoUpdate id="messages" />
                        <h:panelGrid columns="3" style="width: 90%; margin: auto" cellpadding="5">

                            <p:photoCam 
                                widgetVar="pc" 
                                listener="#{institutionController.capturePhoto}" 
                                update="photo" 
                                />

                            <p:commandButton type="button" value="Capture" onclick="PF('pc').capture()"
                                             update="@all"        class="w3-button w3-deep-orange w3-round-large" />

                            <p:outputPanel id="photo" >

                                <p:graphicImage   
                                    id="photos" cache="false"
                                    rendered="#{imageController.image ne null}"    
                                    value="#{imageController.image}"  >
                                </p:graphicImage>

                            </p:outputPanel>

                        </h:panelGrid>


                    </div>








                </h:form>



            </ui:define>

        </ui:composition>

    </body>
</html>
